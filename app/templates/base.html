<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Go2 Control Panel{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="{{ url_for('static', filename='leaflet.rotatedMarker.js') }}"></script>
    {% block head %}{% endblock %}
</head>
<body>
  <div class="theme-switch">
    <input type="checkbox" id="theme-toggle" />
    <label for="theme-toggle" class="switch-slider">
      <span class="icon sun">‚òÄÔ∏è</span>
      <span class="slider"></span>
      <span class="icon moon">üåô</span>
    </label>
  </div>  
    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }}">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    </div>
    <script src="https://cdn.jsdelivr.net/npm/nipplejs@0.9.0/dist/nipplejs.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
          const toggle = document.getElementById('theme-toggle');
          const html = document.documentElement;
          const savedTheme = localStorage.getItem('theme');
      
          // Applique le th√®me selon la pr√©f√©rence
          if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
              html.classList.add('dark');
              toggle.checked = true;
          }
      
          toggle.addEventListener('change', function() {
              if (this.checked) {
                  html.classList.add('dark');
                  localStorage.setItem('theme', 'dark');
              } else {
                  html.classList.remove('dark');
                  localStorage.setItem('theme', 'light');
              }
          });
      });
      </script>          
    {% block scripts %}{% endblock %}
</body>
</html>